<div class="my-container my-6">
    @if((cartItems$ | async)?.length !== 0) {
    <ng-container [ngTemplateOutlet]="addToCartTempl"></ng-container>
    } @else {
    <div class="flex flex-col justify-between gap-8 lg:flex-row" >
        <div class="w-full lg:w-2/3">
            <div class=" border border-solid border-gray-50 rounded">
                <div class="border-b-gray-50-solid-1px p-3">
                    <p class="text-lg font-medium">Shopping Cart</p>
                </div>            
                <div class="flex flex-col cart-container gap-8 py-8">
                    @for (cartItem of (cartItems$ | async); track cartItem) {
                    <div class="flex flex-row justify-between">
                        <div class="border border-solid border-gray-50 rounded-md w-[150px] h-[150px] overflow-hidden">
                            <img src="/assets/images/today-is-a-good-day-framed-poster.jpg" alt="">
                        </div>
                        <div class="w-1/3  flex flex-col gap-2">
                            <p>Apple AirPods Max Over-Ear Wireless Headphone</p>
                            <p>
                                <span class="text-subheading mr-4">${{cartItem.unitPrice}}</span>
                                @if (cartItem.isOnSale) {
                                <span class="text-primary font-semibold text-lg">- ${{cartItem.saleValue}}</span>
                                }
                            </p>
                            <p class="font-bold text-sm">Color: <span class="text-subheading">Grey</span></p>
                            <p class="font-bold text-sm">Dimension: <span class="text-subheading">60x90cm</span></p>
                        </div>
                        <div>
                            <input type="number" placeholder="1" class="w-[80px] h-[60px] border border-solid border-gray-50 rounded pl-2">
                        </div>
                        <div class="text-primary font-semibold text-lg">${{cartItem.finalAfterSalePrice}}</div>
                        <div class="fas fa-trash"></div>
                        <div class="fas fa-trash text-primary" 
                                (click)="clearCart">
                        </div>
                    </div>
                    }
                </div>
            </div>
            <div class="mt-4 ml-2 clear-fix">
                <p class="float-left" style="transform: rotate(-90deg);">
                    <i>&#94;</i>
                </p>
                <a class="block float-left ml-2" 
                    routerLink="/shopping/product-list">
                    Continue Shopping
                </a>
            </div>
        </div>
        <div class="w-full lg:w-1/3">
            <div class=" border border-solid border-gray-50 rounded py-4">
                <div class="border-b border-gray-50 mt-4">
                    <div class="mx-6 my-4 font-semibold">
                        <div class="clear-fix mt-4">
                            <p class="float-left text-sm">1 item</p>
                            <p class="float-right text-primary text-md">$56.95</p>                
                        </div>
            
                        <div class="clear-fix mt-2">
                            <p class="float-left text-sm">Shipping</p>
                            <p class="float-right text-primary text-md">$7.00</p>
                        </div>
                    </div>
                </div>
                <div class="mx-6 my-4 font-semibold">
                    <div class="clear-fix mt-4">
                        <p class="float-left text-sm">Total (tax excl.)</p>
                        <p class="float-right text-primary text-md">$63.95</p>
                    </div>
        
                    <div class="clear-fix mt-2">
                        <p class="float-left text-sm">Total (tax incl.)</p>
                        <p class="float-right text-primary text-md">$63.95</p>
                    </div>
                    <div class="clear-fix mt-2">
                        <p class="float-left text-sm">Taxes:</p>
                        <p class="float-right text-primary text-md">$0.00</p>
                    </div>
                </div>
                <div class="mx-6">
                    <p class="underline text-primary">
                        Have a promote code ?
                    </p>
                    <div class="flex flex-row gap-4">
                        <input type="text" 
                                class="border border-solid border-gray-50 rounded w-3/4 p-2" 
                                placeholder="Promote Code">
                        <button class="btn-primary uppercase text-md">
                            Apply
                        </button>
                    </div>
                </div>
                <div class="mt-12 text-center">
                    <button class="btn-primary uppercase text-md"
                            (click)="clearCart()">
                        Clear Cart
                    </button>
                </div>
                <div class="mt-12 text-center">
                    <button class="btn-primary uppercase text-md">
                        Proceed To Checkout
                    </button>
                </div>
            </div>
            <esa-product-policy>
            </esa-product-policy>
        </div>
    </div>        
    }
</div>

<ng-template #addToCartTempl>
    <h2>Please add product to cart to buy</h2>
    <a [routerLink]="'/shopping/product-list'">Let' s go</a>
</ng-template>